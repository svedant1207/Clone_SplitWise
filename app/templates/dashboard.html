{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-header">
    <div>
        <h1>Dashboard</h1>
        <p class="text-muted">Welcome back, {{ user.name }}!</p>
    </div>
    <div class="actions">
        <a href="{{ url_for('expenses.add_expense') }}" class="btn btn-primary"><i class="fa-solid fa-plus"></i>
            &nbsp;Add Expense</a>
        <a href="{{ url_for('settlements.settle_view') }}" class="btn btn-secondary">Settle Up</a>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <span class="stat-label">total balance</span>
        <span class="stat-value positive">+ $240.00</span>
        <span class="text-muted" style="font-size: 0.85rem; margin-top: 0.5rem;">You are owed</span>
    </div>

    <div class="stat-card">
        <span class="stat-label">you owe</span>
        <span class="stat-value negative">$120.50</span>
        <span class="text-muted" style="font-size: 0.85rem; margin-top: 0.5rem;">to 3 friends</span>
    </div>

    <div class="stat-card">
        <span class="stat-label">you are owed</span>
        <span class="stat-value positive">$360.50</span>
        <span class="text-muted" style="font-size: 0.85rem; margin-top: 0.5rem;">by 5 friends</span>
    </div>
</div>

<div class="recent-activity">
    <h3 class="mb-4">Recent Activity</h3>
    <div class="card">
        {% if recent_expenses %}
        <ul class="expense-list">
            {% for expense in recent_expenses %}
            <li class="flex justify-between items-center"
                style="padding: 1rem 0; border-bottom: 1px solid var(--border-color);">
                <div class="flex flex-col">
                    <span style="font-weight: 600;">{{ expense.description }}</span>
                    <span class="text-muted" style="font-size: 0.85rem;">{{ expense.created_at.strftime('%Y-%m-%d')
                        }}</span>
                </div>
                <div class="flex flex-col items-end">
                    <span style="font-weight: 700;">${{ expense.amount }}</span>
                    <span class="text-muted" style="font-size: 0.85rem;">
                        {% if expense.paid_by_id == user.id %} you paid {% else %} {{ expense.paid_by.name }} paid {%
                        endif %}
                    </span>
                </div>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-muted text-center">No recent expenses.</p>
        {% endif %}
    </div>
</div>
{% endblock %}